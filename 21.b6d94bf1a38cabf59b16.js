(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{CgF7:function(e,t,n){"use strict";n.r(t),n.d(t,"ChatModule",function(){return h});var o=n("ofXK"),r=n("tyNb"),s=n("3Pt+"),i=n("lJxs"),c=n("fXoL"),a=n("LRne"),g=n("sSZD");let b=(()=>{class e{constructor(e){this.db=e}sendMessage(e){let t=Math.floor(8889*Math.random())+100;return e.id=t,e.sn=t,this.db.list("liveChat").push({content:e}),Object(a.a)(e)}getAllMessages(){return this.chats=this.db.list("liveChat"),this.chats.snapshotChanges()}}return e.\u0275fac=function(t){return new(t||e)(c.Xb(g.a))},e.\u0275prov=c.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function d(e,t){if(1&e&&(c.Tb(0,"div",16),c.Ob(1,"div",17),c.Tb(2,"div",18),c.Tb(3,"div",19),c.Tb(4,"div",20),c.Ec(5),c.Sb(),c.Tb(6,"div",21),c.Ec(7),c.Sb(),c.Sb(),c.Tb(8,"div",22),c.Ec(9),c.Sb(),c.Sb(),c.Sb()),2&e){const e=t.$implicit;c.Cb(5),c.Fc(e.content.name),c.Cb(2),c.Fc(e.content.currentTime),c.Cb(2),c.Gc(" ",e.content.message," ")}}function m(e,t){if(1&e&&(c.Tb(0,"div",23),c.Ob(1,"div",24),c.Tb(2,"div",18),c.Tb(3,"div",19),c.Tb(4,"div",20),c.Ec(5),c.Sb(),c.Tb(6,"div",21),c.Ec(7),c.Sb(),c.Sb(),c.Tb(8,"div",22),c.Ec(9),c.Sb(),c.Sb(),c.Sb()),2&e){const e=t.$implicit;c.Cb(5),c.Fc(e.content.name),c.Cb(2),c.Fc(e.content.currentTime),c.Cb(2),c.Gc(" ",e.content.message," ")}}let l=(()=>{class e{constructor(e,t){this.fb=e,this.chatService=t,this.loggedUser=JSON.parse(localStorage.getItem("logged")),this.chats=[],this.individualChat=[],this.another=[],this.initForm()}ngOnInit(){}ngDoCheck(){this.chatService.getAllMessages().pipe(Object(i.a)(e=>e.map(e=>Object.assign({key:e.payload.key},e.payload.val())))).subscribe(e=>{this.chats=e;let t=this.chats.filter(e=>e.content.name===this.loggedUser.content.email);this.individualChat=t;let n=this.chats.filter(e=>e.content.name!==this.loggedUser.content.email);this.another=n})}initForm(){this.chatForm=this.fb.group({id:0,message:null,currentTime:Date.now(),name:this.loggedUser.content.email})}saveChanges(){console.log(this.chatForm.value),this.chatService.sendMessage(this.chatForm.value).subscribe(e=>{console.log("Message sent!!!")}),this.chatForm.setValue({id:null,message:null,currentTime:null,name:null})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(s.d),c.Nb(b))},e.\u0275cmp=c.Hb({type:e,selectors:[["ng-component"]],decls:19,vars:3,consts:[[2,"height","100vh","background","url(https://image.freepik.com/free-photo/shiny-lights_385-19321244.jpg)","background-repeat","no-repeat","background-size","cover","padding-top","100px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"msger"],[1,"msger-header"],[1,"msger-header-title"],[1,"fas","fa-comment-alt"],[1,"msger-header-options"],[1,"fas","fa-cog"],[1,"msger-chat"],["class","msg left-msg",4,"ngFor","ngForOf"],["class","msg right-msg",4,"ngFor","ngForOf"],["autocomplete","off",1,"msger-inputarea",3,"formGroup","ngSubmit"],["type","text","formControlName","message","placeholder","Enter your message...",1,"msger-input"],["type","submit",1,"msger-send-btn"],[1,"msg","left-msg"],[1,"msg-img",2,"background-image","url(https://image.flaticon.com/icons/svg/327/327779.svg)"],[1,"msg-bubble"],[1,"msg-info"],[1,"msg-info-name"],[1,"msg-info-time"],[1,"msg-text"],[1,"msg","right-msg"],[1,"msg-img",2,"background-image","url(https://image.flaticon.com/icons/svg/145/145867.svg)"]],template:function(e,t){1&e&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"section",4),c.Tb(5,"header",5),c.Tb(6,"div",6),c.Ob(7,"i",7),c.Ec(8," SimpleChat "),c.Sb(),c.Tb(9,"div",8),c.Tb(10,"span"),c.Ob(11,"i",9),c.Sb(),c.Sb(),c.Sb(),c.Tb(12,"main",10),c.Dc(13,d,10,3,"div",11),c.Dc(14,m,10,3,"div",12),c.Sb(),c.Tb(15,"form",13),c.ac("ngSubmit",function(){return t.saveChanges()}),c.Ob(16,"input",14),c.Tb(17,"button",15),c.Ec(18,"Send"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&e&&(c.Cb(13),c.lc("ngForOf",t.another),c.Cb(1),c.lc("ngForOf",t.individualChat),c.Cb(1),c.lc("formGroup",t.chatForm))},directives:[o.k,s.r,s.m,s.g,s.c,s.l,s.e],styles:[".msger[_ngcontent-%COMP%]{flex-flow:column wrap;width:100%;margin:25px 10px;height:calc(100% - 50px);border:var(--border);border-radius:5px;background:#fff;box-shadow:0 15px 15px -5px rgba(0,0,0,.2)}.msger[_ngcontent-%COMP%], .msger-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.msger-header[_ngcontent-%COMP%]{padding:10px;border-bottom:2px solid #ddd;background:#eee;color:#666}.msger-chat[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:10px}.msger-chat[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.msger-chat[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ddd}.msger-chat[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#bdbdbd}.msg[_ngcontent-%COMP%]{display:flex;align-items:flex-end;margin-bottom:10px}.msg[_ngcontent-%COMP%]:last-of-type{margin:0}.msg-img[_ngcontent-%COMP%]{width:50px;height:50px;margin-right:10px;background:#ddd;background-repeat:no-repeat;background-position:50%;background-size:cover;border-radius:50%}.msg-bubble[_ngcontent-%COMP%]{max-width:450px;padding:15px;border-radius:15px;background:#ececec}.msg-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.msg-info-name[_ngcontent-%COMP%]{margin-right:10px;font-weight:700}.msg-info-time[_ngcontent-%COMP%]{font-size:.85em}.left-msg[_ngcontent-%COMP%]   .msg-bubble[_ngcontent-%COMP%]{border-bottom-left-radius:0}.right-msg[_ngcontent-%COMP%]{flex-direction:row-reverse}.right-msg[_ngcontent-%COMP%]   .msg-bubble[_ngcontent-%COMP%]{background:#579ffb;color:#fff;border-bottom-right-radius:0}.right-msg[_ngcontent-%COMP%]   .msg-img[_ngcontent-%COMP%]{margin:0 0 0 10px}.msger-inputarea[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:2px solid #ddd;background:#eee}.msger-inputarea[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding:10px;border:none;border-radius:3px;font-size:1em}.msger-input[_ngcontent-%COMP%]{flex:1;background:#ddd}.msger-send-btn[_ngcontent-%COMP%]{margin-left:10px;background:#00c441;color:#fff;font-weight:700;cursor:pointer;transition:background .23s}.msger-send-btn[_ngcontent-%COMP%]:hover{background:#00b432}.msger-chat[_ngcontent-%COMP%]{background-color:#fcfcfe}"]}),e})(),h=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},providers:[b],imports:[[o.c,r.d.forChild([{path:"",component:l}]),s.h,s.p]]}),e})()}}]);